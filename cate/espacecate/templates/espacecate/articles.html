{% extends "espacecate/page_base.html" %}
{% load define %}
{% load join_last %}
{% load school_year %}

{% block page-title %}Articles{% endblock %}

{% block content %}
<h1>Articles</h1>
{% comment %}
The hidden articles are already removed from the pages with views.py.
If there is a hidden article, it means the user is an admin.
{% endcomment %}
{% if articles %}
	{% define ""|school_year as current_school_year %}
	<ul>
	{% for article in articles %}
	{% ifchanged %}
	{% if article.date|school_year != current_school_year %}
	<li class="soustitre">
		Année {{ article.date|school_year }}
	</li>
	{% endif %}
	{% endifchanged %}
	<li>
		<a href="{% url "espacecate:article" article.slug %}">
			{% if article.hidden %}<i>(Article caché : {% endif %}{{ article.title }}{% if article.hidden %})</i>{% endif %}
		</a>
	</li>
	{% endfor %}
	</ul>
{% else %}
	<p>Aucun article</p>
{% endif %}
{% endblock %}
